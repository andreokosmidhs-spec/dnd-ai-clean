# P2.5 Testing Checklist

## Focused Testing (Post-P2.5)

Hit these exact points to validate P2.5 changes:

---

## A. Enemy Sourcing ✓

### Setup
Create a new world that clearly has:
- A shrine/temple POI
- A docks/market POI  
- A barracks/guardhouse POI

(Skim WorldInfoPanel to confirm these exist)

### Test Cases

**Test 1: Shrine Combat**
- Action: `I attack the cultists near the altar`
- Expected: Enemies with cultist/zealot vibe (Cultist, Zealot)
- ❌ Fail if: You see "Bandit" or "Thug"

**Test 2: Docks Combat**
- Action: `I ambush the smugglers at the docks`
- Expected: Criminal-type enemies (Smuggler, Assassin)
- ❌ Fail if: You see "Bandit" or "Thug"

**Test 3: Guard Area Combat**
- Action: `I draw my weapon against the city guard`
- Expected: Guard archetypes (Town Guard, Guard Captain)
- ❌ Fail if: You see "Bandit" or "Thug"

**If you see Bandit/Thug in all three locations → Enemy sourcing is NOT working**

---

## B. Lore Checker Soft Mode ✓

### Test 1: Unknown NPC
- Action: `I walk up to Bob the Blacksmith and introduce myself`
- Check backend logs:
  - ✅ Should see: Warning about unknown NPC "Bob"
  - ✅ Narration text keeps "Bob" unchanged
  - ❌ Fail if: "Bob" is auto-changed to another NPC

### Test 2: Common Capitalized Words
- Action: `The Guard at The Gate looks at You in silence`
- Expected:
  - ✅ No issues OR only minimal warnings
  - ✅ Definitely NO warnings about "You" or "The"
  - ❌ Fail if: Narration is modified by backend

**If narration gets changed by backend → Soft mode is NOT truly soft**

---

## C. Combat UI Persistence ✓

### Test 1: Combat Start
- Trigger combat (attack guards, cultists, whatever)
- Confirm:
  - ✅ CombatHUD visible
  - ✅ Enemies listed
  - ✅ HP bars present

### Test 2: Reload During Combat (CRITICAL)
- **Reload page (F5) in the middle of combat**
- Immediately after reload:
  - ✅ CombatHUD should appear IMMEDIATELY
  - ✅ Even before you click any action
  - ❌ Fail if: HUD is gone and only reappears after action

### Test 3: Combat Continues
- Take another action after reload
- Confirm:
  - ✅ Combat continues normally
  - ✅ Backend still knows combat is active

### Test 4: Combat End
- Defeat enemies or flee
- Confirm:
  - ✅ Combat ends
  - ✅ HUD disappears

### Test 5: Reload After Combat
- Reload page after combat ended
- Confirm:
  - ✅ HUD should NOT reappear
  - ✅ localStorage was cleared

**If HUD is gone after reload mid-combat → Persistence is BROKEN**

---

## Success Criteria

All tests pass:
- [ ] Enemies change based on location (A)
- [ ] Lore checker doesn't auto-correct (B)
- [ ] Combat HUD persists through reload (C)

If any test fails, check:
- Backend logs for errors
- Browser console for localStorage issues
- Backend restart needed (hot reload may not catch service changes)
